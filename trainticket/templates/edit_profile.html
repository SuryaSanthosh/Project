<form method="post" action="" enctype="multipart/form-data">
                            {% csrf_token %}
                            <label for="user-image" class="label">Upload Profile Image</label>
                            <input type="file" name="image" id="user-image" class="form-control" accept="image/*" onchange="updateImageLabel()" {% if not user_profile.image %}required{% endif %} readonly>
                            <span id="image-label">{% if user_profile.image %}{{ user_profile.image.name }}{% else %}No file chosen{% endif %}</span>

                            <hr>

                            <label for="first-name" class="label">First Name</label>
                            <input type="text" name="first_name" id="first-name" class="form-control" value="{% if user_profile.first_name %}{{ user_profile.first_name }}{% endif %}" {% if not user_profile.first_name %}required{% endif %} readonly>
                            <hr>

                            <label for="last-name" class="label">Last Name</label>
                            <input type="text" name="last_name" id="last-name" class="form-control" value="{% if user_profile.last_name %}{{ user_profile.last_name }}{% endif %}" {% if not user_profile.last_name %}required{% endif %} readonly>
                            <hr>

                            <label for="mobile" class="label">Mobile Number</label>
                            <input type="text" name="mobile" id="mobile" class="form-control" value="{% if user_profile.mobile %}{{ user_profile.mobile }}{% endif %}" {% if not user_profile.mobile %}required{% endif %} readonly>
                            <hr>

                            <label for="address" class="label">Address</label>
                            <input type="text" name="address" id="address" class="form-control" value="{% if user_profile.address %}{{ user_profile.address }}{% endif %}" {% if not user_profile.address %}required{% endif %} readonly>
                            <hr>

                            <div class="form-group">
                                {% if created %}
                                    <button type="submit" class="btn btn-lg btn-success" id="save-button">Save</button>
                                {% else %}
                                    <button type="button" class="btn btn-lg btn-primary" id="edit-button">Edit</button>
                                    <button type="submit" class="btn btn-lg btn-success" id="save-button" style="display: none;">Save</button>
                                {% endif %}
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

  
    <!-- Add this div where it makes sense, for example, at the end of the body -->
    <div id="hasDetails" style="display:none;" data-has-details="{% if user_profile.first_name or user_profile.last_name or user_profile.mobile or user_profile.address %}true{% else %}false{% endif %}"></div>

    <!-- Your existing scripts -->
    <script>
        var hasDetails = document.getElementById('hasDetails').getAttribute('data-has-details') === 'true';
        
        document.addEventListener('DOMContentLoaded', function() {
            toggleReadOnly(hasDetails);
        });

        document.getElementById('edit-button').addEventListener('click', function() {
            toggleReadOnly(false);
        });

        function toggleReadOnly(readOnly) {
            var formFields = document.querySelectorAll('.form-control');
            formFields.forEach(function(field) {
                field.readOnly = readOnly;
            });

            document.getElementById('save-button').style.display = readOnly ? 'none' : 'block';
            document.getElementById('edit-button').style.display = readOnly ? 'block' : 'none';
        }
    </script>
</body>