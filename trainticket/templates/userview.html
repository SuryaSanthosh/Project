<style>
    

   

  

    table {
        width: 70%;
        border-collapse: collapse;
        margin-left: 250px;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }

    th {
        background-color: #333;
        color: #fff;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    /* Reduce padding and font size for email cell */
    td:nth-child(2) {
        padding: 8px; /* Adjust the padding size as needed */
        font-size: 14px; /* Adjust the font size as needed */
    }

    .filter-container {
        text-align: center;
        margin: 20px 0;
    }

    select {
        padding: 8px;
    }

    button {
        padding: 8px 16px;
        background-color: #333;
        color: #fff;
        border: none;
        cursor: pointer;
    }
    .activate-button {
        background-color: #4CAF50; /* Green */
    }

    .deactivate-button {
        background-color: #f44336; /* Red */
    }
    .header-container {
        text-align: center;
        margin-bottom: 20px;
    }

    .header-container h1 {
        color: #333;
    }

    .serial-number {
        width: 50px;
    }
    .pagination {
        text-align: center;
        margin-top: 20px;
    }

    .pagination .step-links {
        display: inline-block;
    }

    .pagination .step-links a {
        padding: 10px;
        margin: 0 5px;
        text-decoration: none;
        border: 1px solid #ddd;
        background-color: #f2f2f2;
        color: #333;
    }

    .pagination .step-links .current {
        padding: 10px;
        margin: 0 5px;
        text-decoration: none;
        background-color: #333;
        color: #fff;
    }

</style>

<div><center>
    <h1>User Table</h1></center>
    <form action="{% url 'userview' %}" method="GET">
    <div class="filter-container">
        <select id="roleFilter" name="role">
            <option value="">All Roles</option>
            {% comment %} <option value="ADMIN" {% if role_filter == 'ADMIN' %}selected{% endif %}></option> {% endcomment %}
            <option value="USER" {% if role_filter == 'USER' %}selected{% endif %}>USER</option>
            
        </select>
        
        
        
        <button id="filterButton" type="submit">Filter</button>
    </form>
    </div>
    <table>
        <tr>
            <th>Serial Number</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email ID</th>
            
            <th>status</th>
           
        </tr>
        <tbody>
            {% for Users in User_profiles %}
                {% if not Users.is_superuser %}
                    <tr>
                        <td class="serial-number">{{ forloop.counter }}</td>
                        <td>{{ Users.first_name }}</td>
                        <td>{{ Users.last_name }}</td>
                        <td>{{ Users.email }}</td>
                        <td>{% if Users.is_active %}
                            <form method="post" action="{% url 'deactivate_user' Users.id %}">
                                {% csrf_token %}
                                <button type="submit" class="deactivate-button">Deactivate</button>
                            </form>
                        {% else %}
                            <form method="post" action="{% url 'activate_user' Users.id %}">
                                {% csrf_token %}
                                <button type="submit" class="activate-button">Activate</button>
                            </form>
                        {% endif %}
                        
                        </td>
                        
                            {% if Users.role != "ADMIN" %}
                                
                            {% endif %}
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
        <!-- Add more rows as needed without the "Role" field -->
    </table>


    <!-- Pagination links -->
<div class="pagination">
    <span class="step-links">
        {% if User_profiles.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ User_profiles.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ User_profiles.number }} of {{ User_profiles.paginator.num_pages }}.
        </span>

        {% if User_profiles.has_next %}
            <a href="?page={{ User_profiles.next_page_number }}">next</a>
            <a href="?page={{ User_profiles.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js">
    
        $(document).ready(function () {
            const roleFilter = $('#roleFilter');
            const rows = $('table tbody tr');
    
            roleFilter.on('change', function () {
                const selectedRole = roleFilter.val();
                rows.each(function () {
                    const roleCell = $(this).find('td').eq(2); // Index 2 is the position of the "Role" cell
                    const userRole = roleCell.text().trim();
                    
                    if (selectedRole === '' || userRole === selectedRole) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
        });
    </script>
    

</div>